<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اطلاعات مشتریان بانک سپه</title>
  <style>
    body {
      font-family: Tahoma, Arial, sans-serif;
      direction: rtl;
      margin: 20px;
      background-color: #f5f5f5;
    }
    
    h1 {
      color: #0c4b8e;
      text-align: center;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .search-box {
      margin-bottom: 20px;
    }
    
    .search-box input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: Tahoma, Arial, sans-serif;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 10px;
      text-align: right;
      border-bottom: 1px solid #ddd;
    }
    
    th {
      background-color: #0c4b8e;
      color: white;
    }
    
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    
    tr:hover {
      background-color: #e6e6e6;
    }
    
    .loading {
      text-align: center;
      padding: 20px;
      font-size: 18px;
      color: #666;
    }
    
    .error {
      background-color: #ffebee;
      color: #c62828;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>اطلاعات مشتریان بانک سپه</h1>
    
    <div id="errorMessage" class="error" style="display: none;"></div>
    
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="جستجو...">
    </div>
    
    <div id="loading" class="loading">در حال بارگذاری اطلاعات...</div>
    
    <table id="customerTable">
      <thead>
        <tr>
          <th>نام مشتری</th>
          <th>کد ملی</th>
          <th>محل تولد</th>
          <th>شماره موبایل</th>
          <th>گروه مشتریان</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        <!-- داده‌ها اینجا قرار می‌گیرند -->
      </tbody>
    </table>
  </div>

  <script>
    // اجرای کد پس از بارگذاری صفحه
    document.addEventListener('DOMContentLoaded', function() {
      // بارگذاری داده‌ها
      loadData();
      
      // تنظیم رویداد جستجو
      document.getElementById('searchInput').addEventListener('input', function() {
        filterTable(this.value);
      });
    });
    
    // بارگذاری داده‌ها از فایل JSON
    function loadData() {
      // نمایش وضعیت بارگذاری
      document.getElementById('loading').style.display = 'block';
      document.getElementById('customerTable').style.display = 'none';
      
      // تلاش برای بارگذاری داده‌ها از فایل
      fetch('data/sepahbilion.json')
        .then(response => {
          if (!response.ok) {
            throw new Error('فایل یافت نشد');
          }
          return response.json();
        })
        .then(data => {
          // مخفی کردن وضعیت بارگذاری
          document.getElementById('loading').style.display = 'none';
          document.getElementById('customerTable').style.display = 'table';
          
          // نمایش داده‌ها
          displayData(data);
          console.log(`${data.length} رکورد از فایل بارگذاری شد.`);
        })
        .catch(error => {
          console.error('خطا در بارگذاری داده‌ها:', error);
          
          // نمایش پیام خطا
          document.getElementById('loading').style.display = 'none';
          document.getElementById('errorMessage').style.display = 'block';
          document.getElementById('errorMessage').textContent = 'خطا در بارگذاری اطلاعات. استفاده از داده‌های نمونه...';
          
          // استفاده از داده‌های نمونه در صورت خطا
          const sampleData = [

            {
              "name": "نام مشتری 2",
              "national_id": "9876543210",
              "birth_place": "تهران",
              "mobile": "09123456789",
              "customer_group": "مشتری ویژه"
            }
          ];
          
          // نمایش داده‌های نمونه
          document.getElementById('customerTable').style.display = 'table';
          displayData(sampleData);
        });
    }
    
    // نمایش داده‌ها در جدول
    function displayData(customers) {
      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = '';
      
      customers.forEach(customer => {
        const row = document.createElement('tr');
        
        // نام مشتری
        const nameCell = document.createElement('td');
        nameCell.textContent = customer.name;
        row.appendChild(nameCell);
        
        // کد ملی
        const nationalIdCell = document.createElement('td');
        nationalIdCell.textContent = customer.national_id;
        row.appendChild(nationalIdCell);
        
        // محل تولد
        const birthPlaceCell = document.createElement('td');
        birthPlaceCell.textContent = customer.birth_place;
        row.appendChild(birthPlaceCell);
        
        // شماره موبایل
        const mobileCell = document.createElement('td');
        mobileCell.textContent = customer.mobile;
        row.appendChild(mobileCell);
        
        // گروه مشتریان
        const customerGroupCell = document.createElement('td');
        customerGroupCell.textContent = customer.customer_group;
        row.appendChild(customerGroupCell);
        
        tableBody.appendChild(row);
      });
    }
    
    // فیلتر جدول بر اساس متن جستجو
    function filterTable(searchText) {
      const tableBody = document.getElementById('tableBody');
      const rows = tableBody.getElementsByTagName('tr');
      
      searchText = searchText.toLowerCase();
      
      for (let i = 0; i < rows.length; i++) {
        const row = rows[i];
        const cells = row.getElementsByTagName('td');
        let found = false;
        
        for (let j = 0; j < cells.length; j++) {
          const cellText = cells[j].textContent.toLowerCase();
          if (cellText.includes(searchText)) {
            found = true;
            break;
          }
        }
        
        row.style.display = found ? '' : 'none';
      }
    }
  </script>
</body>
</html>
